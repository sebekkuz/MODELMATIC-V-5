import Fastify from 'fastify';import websocket from '@fastify/websocket';import cors from '@fastify/cors';import { Engine } from '@prodsim/sim-engine';const app=Fastify({logger:true});await app.register(cors,{origin:true});await app.register(websocket);app.get('/health',async()=>({ok:true}));app.get('/ws',{websocket:true},(conn,req)=>{conn.socket.send(JSON.stringify({type:'HELLO_OK',server:'backend',version:'1.0'}));});app.listen({port:3000,host:'0.0.0.0'}).then(()=>app.log.info('Backend running')).catch(err=>{app.log.error(err);process.exit(1);});
