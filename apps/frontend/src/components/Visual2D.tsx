import { Canvas } from '@react-three/fiber';import { OrthographicCamera } from '@react-three/drei';import { useStore } from '../state/store';import { useMemo, useState } from 'react';function StationNode({id}:{id:string}){const st=useStore(s=>s.project.layout.stations.find(x=>x.id===id));if(!st)return null;const [hover,setHover]=useState(false);const color=hover?'#5fa':((st as any).color||'#6a8dd9');const x=st.pos.x*1.5,y=-st.pos.y*1.0;return(<group position={[x,y,0]}><mesh onPointerOver={()=>setHover(true)} onPointerOut={()=>setHover(false)}><boxGeometry args={[1.2,0.8,0.05]}/><meshStandardMaterial color={color}/></mesh></group>);}export default function Visual2D(){const {stations}=useStore(s=>({stations:s.project.layout.stations}));const ids=useMemo(()=>stations.map(s=>s.id),[stations]);return(<Canvas orthographic shadows className='canvas2d'><color attach='background' args={[0x0d1838]}/><ambientLight intensity={0.8}/><OrthographicCamera makeDefault position={[0,0,10]} zoom={60}/>{ids.map(id=><StationNode key={id} id={id}/> )}</Canvas>);}